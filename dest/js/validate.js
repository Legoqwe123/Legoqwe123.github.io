$(document).ready(function(){$("[data-submit]").on("click",function(e){e.preventDefault(),$(this).parents("form").submit()}),$.validator.addMethod("regex",function(e,a,t){var n=new RegExp(t);return this.optional(a)||n.test(e)},"Please check your input."),$(".js-form").each(function(){$(this),$.validator.addMethod("requiredphone",function(e,a){return e.length||$.trim($('[name="email"]').val())},"Заполните телефон или email!"),$.validator.addMethod("requiredemail",function(e,a){return e.length||$.trim($('[name="phone"]').val())},"Заполните email или телефон!"),$(".order-form").validate({rules:{phone:{requiredphone:!0},email:{requiredemail:!0},name:{required:!0}},messages:{name:{required:"Поле обязательно для заполнения"}},submitHandler:function(e,a){$("#loader").fadeIn();var t=$(e);switch($(e).attr("id")){case"popupCall":$.ajax({type:"POST",url:t.attr("action"),data:t.serialize()}).always(function(e){setTimeout(function(){$("#loader").fadeOut()},800),setTimeout(function(){$("#overlay").fadeIn(),t.trigger("reset")},1100),$("#overlay").on("click",function(e){$("#overlay").fadeOut(),$(".popup_wrapper").css({opacity:"0","z-index":"-1",visibility:"hidden"}),$(".overlay").css({display:"none"})})});break;case"popupOrder":var n=0,i=new FormData;for(n in e.elements)"file"===e.elements[n].type?i.append("fileToUpload",e[n].files[0]):i.append(e.elements[n].name,e.elements[n].value);$.ajax({data:i,processData:!1,contentType:!1,type:"POST",url:t.attr("action")}).always(function(e){setTimeout(function(){$("#loader").fadeOut()},800),setTimeout(function(){$("#overlay").fadeIn(),t.trigger("reset")},1100),$("#overlay").on("click",function(e){$("#overlay").fadeOut(),$(".overlay").css({display:"none"})}),$(".img-close").on("click",function(e){$("#overlay").fadeOut(),$(".overlay").css({display:"none"})})})}return!1}})})});